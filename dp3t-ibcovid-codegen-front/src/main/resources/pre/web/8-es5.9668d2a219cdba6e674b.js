function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ck7H:function(e,t,n){"use strict";n.r(t),n.d(t,"CoronaWarnModule",(function(){return I}));var c,i,o=n("tk/3"),s=n("1kSV"),r=n("tyNb"),a=n("fXoL"),d=n("OOyK"),b=((c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=a.Gb({type:c,selectors:[["app-corona-warn"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Nb(0,"app-header"),a.Nb(1,"router-outlet"))},directives:[d.a,r.d],styles:[""]}),c),l=n("3Pt+"),u=n("AytR"),p=((i=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"generateAccessCode",value:function(){return this.httpClient.get(u.a.codeGenServiceHost+"/admin/downloaded-access-code")}},{key:"sendMessage",value:function(e,t){return this.httpClient.get(u.a.codeGenServiceHost+"/admin/downloaded-access-code/send-sms?number="+e+"&code="+t)}}]),e}()).\u0275fac=function(e){return new(e||i)(a.Zb(o.b))},i.\u0275prov=a.Ib({token:i,factory:i.\u0275fac,providedIn:"root"}),i),f=n("5eHb"),m=n("ofXK"),h=n("FMnn");function v(e,t){1&e&&(a.Rb(0,"span"),a.zc(1,"Generar c\xf3digo"),a.Qb())}function C(e,t){1&e&&a.Nb(0,"i",26)}function g(e,t){1&e&&(a.Rb(0,"span"),a.zc(1,"Enviar SMS"),a.Qb())}function R(e,t){1&e&&a.Nb(0,"i",26)}var Q,y,z,k=[{path:"",redirectTo:"access-code"},{path:"access-code",component:b,children:[{path:"",component:(Q=function(){function e(t,n,c){_classCallCheck(this,e),this.generateAccessCodeService=t,this.formBuilder=n,this.toastr=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.accessCodeForm=this.formBuilder.group({accessCode:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")]),expirationInHours:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")]),tlfMovil:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")])}),this.accessCodeFormInitialValues=this.accessCodeForm.value}},{key:"hasToDisableButtons",value:function(){return this._submittedAccessCode||this._submittedSMS}},{key:"generateAccessCode",value:function(){var e=this;this._submittedAccessCode=!0,this.generateAccessCodeService.generateAccessCode().subscribe((function(t){e.updateFormWithAccessCode(t.accessCode),e._submittedAccessCode=!1}),(function(t){e.handleCommonErrors("Error","Error al intentar obtener el c\xf3digo. Si persiste el error contacte con el administrador.",t),e._submittedAccessCode=!1}))}},{key:"enviarSMS",value:function(){var e=this;this.generateAccessCodeService.sendMessage(this.accessCodeForm.get("tlfMovil").value,this.accessCode).subscribe((function(t){e.toastr.success("C\xf3digo enviado con \xe9xito.")}),(function(t){e.handleCommonErrors("Error","Error al intentar enviar el sms. Si persiste el error contacte con el administrador.",t),e._submittedAccessCode=!1}))}},{key:"resetForm",value:function(){this.accessCodeForm.reset(this.accessCodeFormInitialValues)}},{key:"handleCommonErrors",value:function(e,t,n){var c=t;403===n.status&&(c="Error de autenticaci\xf3n. Es posible que haya caducado la sesi\xf3n, intente conectarse de nuevo."),this.toastr.error(c,e)}},{key:"updateFormWithAccessCode",value:function(e){this.accessCode=e,this.accessCodeForm.patchValue({accessCode:e.match(/.{1,3}/g).join(" ")})}},{key:"submittedAccessCode",get:function(){return this._submittedAccessCode}},{key:"submittedSMS",get:function(){return this._submittedSMS}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(a.Mb(p),a.Mb(l.c),a.Mb(f.b))},Q.\u0275cmp=a.Gb({type:Q,selectors:[["app-generate-access-code"]],decls:91,vars:7,consts:[[1,"generate-access-code-container","component-container"],[1,"container-fluid"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"page-title"],[1,"row","align-items-center"],[1,"col-md-6","d-flex","justify-content-start"],[1,"emphasized","h-100"],[1,"col-md-6","d-flex","justify-content-end"],["type","reset",1,"btn","btn-standard","h-100",3,"click"],[1,"card","bg-white","shadow-sm","m-3"],[1,"card-body"],[1,"card-text"],[1,"card-header","bg-white"],[1,"emphasized"],[3,"formGroup"],[1,"card-header"],[1,"d-flex"],[1,"ml-1","w-100"],[1,"form-group","d-flex","justify-content-start"],["formControlName","accessCode","id","accessCode","readonly","","type","text",1,"form-control","w-25","text-center"],["type","button",1,"btn","btn-standard","w-25",3,"disabled","click"],[4,"ngIf"],["class","fa fa-lg fa-spinner fa-spin",4,"ngIf"],["digitOnly","","formControlName","tlfMovil","id","tlfMovil","inputmode","numeric","pattern","[0-9]*","placeholder","N\xfamero de tel\xe9fono m\xf3vil","required","","type","tel",1,"form-control","w-25","text-center"],[1,"fa","fa-lg","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"div",2),a.Nb(3,"div",3),a.Rb(4,"div",4),a.Rb(5,"section",5),a.Rb(6,"div",6),a.Rb(7,"div",7),a.Rb(8,"span",8),a.zc(9,"Generar c\xf3digo de acceso"),a.Qb(),a.Qb(),a.Rb(10,"div",9),a.Rb(11,"button",10),a.dc("click",(function(){return t.resetForm()})),a.zc(12,"Siguiente paciente"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Nb(13,"div",3),a.Qb(),a.Rb(14,"div",2),a.Nb(15,"div",3),a.Rb(16,"div",4),a.Rb(17,"section",11),a.Rb(18,"div",12),a.Rb(19,"div",13),a.Rb(20,"p"),a.zc(21,"Los c\xf3digos de acceso de IBCOVID s\xf3lo deben ser propoprcionados a pacientes con:"),a.Qb(),a.Rb(22,"ul"),a.Rb(23,"li"),a.zc(24,"resultados de test COVID-19 positivos confirmados"),a.Qb(),a.Rb(25,"li"),a.zc(26,"otros criterios adicionales, tales como diagn\xf3sticos confirmados"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(27,"section",11),a.Rb(28,"div",14),a.zc(29," Aseg\xfarese de que el paciente tiene instalada la aplicaci\xf3n de IBCOVID en su m\xf3vil "),a.Qb(),a.Rb(30,"div",12),a.Rb(31,"div",13),a.Rb(32,"p"),a.zc(33,"Instruya al paciente a:"),a.Qb(),a.Rb(34,"ol"),a.Rb(35,"li"),a.zc(36,"Visitar "),a.Rb(37,"span",15),a.zc(38,"https://github.com/corona-warn-ib (falta URL real)"),a.Qb(),a.Qb(),a.Rb(39,"li"),a.zc(40,"Pulsar sobre el icono de Apple App Store (iPhone) o Google Play (Android)"),a.Qb(),a.Rb(41,"li"),a.zc(42,"Instalar la aplicaci\xf3n."),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(43,"section",11),a.Rb(44,"form",16),a.Rb(45,"div",17),a.zc(46," Facilite al paciente el c\xf3digo de acceso de IBCOVID "),a.Qb(),a.Rb(47,"div",12),a.Rb(48,"div",13),a.Rb(49,"p"),a.zc(50,"Instruya al paciente a:"),a.Qb(),a.Rb(51,"ol"),a.Rb(52,"li"),a.zc(53,"Abrir la aplicaci\xf3n de IBCOVID pulsando sobre el icono."),a.Qb(),a.Rb(54,"li"),a.zc(55,"Pulsar sobre la pesta\xf1a "),a.Rb(56,"span",15),a.zc(57,"\xbfQu\xe9 hacer si el test da positivo?"),a.Qb(),a.Qb(),a.Rb(58,"li"),a.zc(59,"Pulsar en "),a.Rb(60,"span",15),a.zc(61,"Introducir el c\xf3digo Covid"),a.Qb(),a.zc(62,"."),a.Qb(),a.Rb(63,"li"),a.zc(64,"Leer la advertencia y pulsar sobre "),a.Rb(65,"span",15),a.zc(66,"Entendido"),a.Qb(),a.zc(67,"."),a.Qb(),a.Rb(68,"li",18),a.Rb(69,"div",19),a.Rb(70,"p"),a.zc(71,"Introducir el siguiente c\xf3digo de 12 d\xedgitos:"),a.Qb(),a.Rb(72,"div",20),a.Nb(73,"input",21),a.Rb(74,"button",22),a.dc("click",(function(){return t.generateAccessCode()})),a.xc(75,v,2,0,"span",23),a.xc(76,C,1,0,"i",24),a.Qb(),a.Qb(),a.Rb(77,"p"),a.zc(78,"De forma alternativa, p\xeddale el n\xfamero de tel\xe9fono m\xf3vil al paciente y env\xedele el c\xf3digo mediante SMS:"),a.Qb(),a.Rb(79,"div"),a.Rb(80,"div",20),a.Nb(81,"input",25),a.Rb(82,"button",22),a.dc("click",(function(){return t.enviarSMS()})),a.xc(83,g,2,0,"span",23),a.xc(84,R,1,0,"i",24),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(85,"li"),a.zc(86,"Pulsar sobre el bot\xf3n "),a.Rb(87,"span",15),a.zc(88,"Enviar"),a.Qb(),a.zc(89,"."),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Nb(90,"div",3),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(44),a.ic("formGroup",t.accessCodeForm),a.zb(30),a.ic("disabled",t.hasToDisableButtons()),a.zb(1),a.ic("ngIf",!t.submittedAccessCode),a.zb(1),a.ic("ngIf",t.submittedAccessCode),a.zb(6),a.ic("disabled",t.hasToDisableButtons()),a.zb(1),a.ic("ngIf",!t.submittedSMS),a.zb(1),a.ic("ngIf",t.submittedSMS))},directives:[l.r,l.k,l.e,l.b,l.j,l.d,m.k,h.a,l.m,l.o],styles:[".generate-access-code-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-top:.5rem;padding:0 1rem}"]}),Q)}]}],S=((y=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:y}),y.\u0275inj=a.Jb({factory:function(e){return new(e||y)},imports:[[r.c.forChild(k)],r.c]}),y),w=n("pKmL"),I=((z=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:z}),z.\u0275inj=a.Jb({factory:function(e){return new(e||z)},providers:[m.d],imports:[[S,w.a,o.c,l.g,l.n,s.a,h.b]]}),z)}}]);