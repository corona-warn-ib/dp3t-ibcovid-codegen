(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ck7H:function(e,t,s){"use strict";s.r(t),s.d(t,"CoronaWarnModule",(function(){return z}));var c=s("tk/3"),o=s("1kSV"),i=s("tyNb"),r=s("fXoL"),n=s("OOyK");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Gb({type:e,selectors:[["app-corona-warn"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Nb(0,"app-header"),r.Nb(1,"router-outlet"))},directives:[n.a,i.d],styles:[""]}),e})();var d=s("3Pt+"),b=s("AytR");let l=(()=>{class e{constructor(e){this.httpClient=e}generateAccessCode(){return this.httpClient.get(b.a.codeGenServiceHost+"/admin/downloaded-access-code")}sendMessage(e,t){return this.httpClient.get(b.a.codeGenServiceHost+"/admin/downloaded-access-code/send-sms?number="+e+"&code="+t)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(c.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=s("5eHb"),p=s("ofXK"),m=s("FMnn");function f(e,t){1&e&&(r.Rb(0,"span"),r.zc(1,"Generar c\xf3digo"),r.Qb())}function h(e,t){1&e&&r.Nb(0,"i",26)}function v(e,t){1&e&&(r.Rb(0,"span"),r.zc(1,"Enviar SMS"),r.Qb())}function Q(e,t){1&e&&r.Nb(0,"i",26)}const R=[{path:"",redirectTo:"access-code"},{path:"access-code",component:a,children:[{path:"",component:(()=>{class e{constructor(e,t,s){this.generateAccessCodeService=e,this.formBuilder=t,this.toastr=s}get submittedAccessCode(){return this._submittedAccessCode}get submittedSMS(){return this._submittedSMS}ngOnInit(){this.accessCodeForm=this.formBuilder.group({accessCode:this.formBuilder.control("",[d.p.required,d.p.pattern("^[0-9]*$")]),expirationInHours:this.formBuilder.control("",[d.p.required,d.p.pattern("^[0-9]*$")]),tlfMovil:this.formBuilder.control("",[d.p.required,d.p.pattern("^[0-9]*$")])}),this.accessCodeFormInitialValues=this.accessCodeForm.value}hasToDisableButtons(){return this._submittedAccessCode||this._submittedSMS}generateAccessCode(){this._submittedAccessCode=!0,this.generateAccessCodeService.generateAccessCode().subscribe(e=>{this.updateFormWithAccessCode(e.accessCode),this._submittedAccessCode=!1},e=>{this.handleCommonErrors("Error","Error al intentar obtener el c\xf3digo. Si persiste el error contacte con el administrador.",e),this._submittedAccessCode=!1})}enviarSMS(){this.generateAccessCodeService.sendMessage(this.accessCodeForm.get("tlfMovil").value,this.accessCode).subscribe(e=>{this.toastr.success("C\xf3digo enviado con \xe9xito.")},e=>{this.handleCommonErrors("Error","Error al intentar enviar el sms. Si persiste el error contacte con el administrador.",e),this._submittedAccessCode=!1})}resetForm(){this.accessCodeForm.reset(this.accessCodeFormInitialValues)}handleCommonErrors(e,t,s){let c=t;403===s.status&&(c="Error de autenticaci\xf3n. Es posible que haya caducado la sesi\xf3n, intente conectarse de nuevo."),this.toastr.error(c,e)}updateFormWithAccessCode(e){this.accessCode=e,this.accessCodeForm.patchValue({accessCode:e.match(/.{1,3}/g).join(" ")})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(l),r.Mb(d.c),r.Mb(u.b))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-generate-access-code"]],decls:91,vars:7,consts:[[1,"generate-access-code-container","component-container"],[1,"container-fluid"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"page-title"],[1,"row","align-items-center"],[1,"col-md-6","d-flex","justify-content-start"],[1,"emphasized","h-100"],[1,"col-md-6","d-flex","justify-content-end"],["type","reset",1,"btn","btn-standard","h-100",3,"click"],[1,"card","bg-white","shadow-sm","m-3"],[1,"card-body"],[1,"card-text"],[1,"card-header","bg-white"],[1,"emphasized"],[3,"formGroup"],[1,"card-header"],[1,"d-flex"],[1,"ml-1","w-100"],[1,"form-group","d-flex","justify-content-start"],["formControlName","accessCode","id","accessCode","readonly","","type","text",1,"form-control","w-25","text-center"],["type","button",1,"btn","btn-standard","w-25",3,"disabled","click"],[4,"ngIf"],["class","fa fa-lg fa-spinner fa-spin",4,"ngIf"],["digitOnly","","formControlName","tlfMovil","id","tlfMovil","inputmode","numeric","pattern","[0-9]*","placeholder","N\xfamero de tel\xe9fono m\xf3vil","required","","type","tel",1,"form-control","w-25","text-center"],[1,"fa","fa-lg","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Nb(3,"div",3),r.Rb(4,"div",4),r.Rb(5,"section",5),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Rb(8,"span",8),r.zc(9,"Generar c\xf3digo de acceso"),r.Qb(),r.Qb(),r.Rb(10,"div",9),r.Rb(11,"button",10),r.dc("click",(function(){return t.resetForm()})),r.zc(12,"Siguiente paciente"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(13,"div",3),r.Qb(),r.Rb(14,"div",2),r.Nb(15,"div",3),r.Rb(16,"div",4),r.Rb(17,"section",11),r.Rb(18,"div",12),r.Rb(19,"div",13),r.Rb(20,"p"),r.zc(21,"Los c\xf3digos de acceso de IBCOVID s\xf3lo deben ser propoprcionados a pacientes con:"),r.Qb(),r.Rb(22,"ul"),r.Rb(23,"li"),r.zc(24,"resultados de test COVID-19 positivos confirmados"),r.Qb(),r.Rb(25,"li"),r.zc(26,"otros criterios adicionales, tales como diagn\xf3sticos confirmados"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(27,"section",11),r.Rb(28,"div",14),r.zc(29," Aseg\xfarese de que el paciente tiene instalada la aplicaci\xf3n de IBCOVID en su m\xf3vil "),r.Qb(),r.Rb(30,"div",12),r.Rb(31,"div",13),r.Rb(32,"p"),r.zc(33,"Instruya al paciente a:"),r.Qb(),r.Rb(34,"ol"),r.Rb(35,"li"),r.zc(36,"Visitar "),r.Rb(37,"span",15),r.zc(38,"http://radarcovidbalears.caib.es"),r.Qb(),r.Qb(),r.Rb(39,"li"),r.zc(40,"Pulsar sobre el icono de Apple App Store (iPhone) o Google Play (Android)"),r.Qb(),r.Rb(41,"li"),r.zc(42,"Instalar la aplicaci\xf3n."),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(43,"section",11),r.Rb(44,"form",16),r.Rb(45,"div",17),r.zc(46," Facilite al paciente el c\xf3digo de acceso de IBCOVID "),r.Qb(),r.Rb(47,"div",12),r.Rb(48,"div",13),r.Rb(49,"p"),r.zc(50,"Instruya al paciente a:"),r.Qb(),r.Rb(51,"ol"),r.Rb(52,"li"),r.zc(53,"Abrir la aplicaci\xf3n de IBCOVID pulsando sobre el icono."),r.Qb(),r.Rb(54,"li"),r.zc(55,"Pulsar sobre la pesta\xf1a "),r.Rb(56,"span",15),r.zc(57,"\xbfQu\xe9 hacer si el test da positivo?"),r.Qb(),r.Qb(),r.Rb(58,"li"),r.zc(59,"Pulsar en "),r.Rb(60,"span",15),r.zc(61,"Introducir el c\xf3digo Covid"),r.Qb(),r.zc(62,"."),r.Qb(),r.Rb(63,"li"),r.zc(64,"Leer la advertencia y pulsar sobre "),r.Rb(65,"span",15),r.zc(66,"Entendido"),r.Qb(),r.zc(67,"."),r.Qb(),r.Rb(68,"li",18),r.Rb(69,"div",19),r.Rb(70,"p"),r.zc(71,"Introducir el siguiente c\xf3digo de 12 d\xedgitos:"),r.Qb(),r.Rb(72,"div",20),r.Nb(73,"input",21),r.Rb(74,"button",22),r.dc("click",(function(){return t.generateAccessCode()})),r.xc(75,f,2,0,"span",23),r.xc(76,h,1,0,"i",24),r.Qb(),r.Qb(),r.Rb(77,"p"),r.zc(78,"De forma alternativa, p\xeddale el n\xfamero de tel\xe9fono m\xf3vil al paciente y env\xedele el c\xf3digo mediante SMS:"),r.Qb(),r.Rb(79,"div"),r.Rb(80,"div",20),r.Nb(81,"input",25),r.Rb(82,"button",22),r.dc("click",(function(){return t.enviarSMS()})),r.xc(83,v,2,0,"span",23),r.xc(84,Q,1,0,"i",24),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(85,"li"),r.zc(86,"Pulsar sobre el bot\xf3n "),r.Rb(87,"span",15),r.zc(88,"Enviar"),r.Qb(),r.zc(89,"."),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(90,"div",3),r.Qb(),r.Qb(),r.Qb()),2&e&&(r.zb(44),r.ic("formGroup",t.accessCodeForm),r.zb(30),r.ic("disabled",t.hasToDisableButtons()),r.zb(1),r.ic("ngIf",!t.submittedAccessCode),r.zb(1),r.ic("ngIf",t.submittedAccessCode),r.zb(6),r.ic("disabled",t.hasToDisableButtons()),r.zb(1),r.ic("ngIf",!t.submittedSMS),r.zb(1),r.ic("ngIf",t.submittedSMS))},directives:[d.r,d.k,d.e,d.b,d.j,d.d,p.k,m.a,d.m,d.o],styles:[".generate-access-code-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-top:.5rem;padding:0 1rem}"]}),e})()}]}];let g=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[i.c.forChild(R)],i.c]}),e})();var C=s("pKmL");let z=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},providers:[p.d],imports:[[g,C.a,c.c,d.g,d.n,o.a,m.b]]}),e})()}}]);