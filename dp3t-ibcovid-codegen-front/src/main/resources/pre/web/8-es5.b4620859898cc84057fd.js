function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ck7H:function(e,t,n){"use strict";n.r(t),n.d(t,"CoronaWarnModule",(function(){return I}));var i,c,o=n("tk/3"),s=n("1kSV"),r=n("tyNb"),a=n("fXoL"),d=n("OOyK"),b=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Gb({type:i,selectors:[["app-corona-warn"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Nb(0,"app-header"),a.Nb(1,"router-outlet"))},directives:[d.a,r.d],styles:[""]}),i),l=n("3Pt+"),u=n("AytR"),p=n("RL7/"),f=((c=function(){function e(t,n){_classCallCheck(this,e),this.httpClient=t,this.authService=n}return _createClass(e,[{key:"generateAccessCode",value:function(){var e=sessionStorage.getItem("AUTH_TOKEN"),t={headers:new o.d({Authorization:"Bearer "+e})};return this.httpClient.get(u.a.codeGenServiceHost+"/admin/downloaded-access-code",t)}},{key:"sendMessage",value:function(e,t){var n=sessionStorage.getItem("AUTH_TOKEN");return new o.d({Authorization:"Bearer "+n}),this.httpClient.get(u.a.codeGenServiceHost+"/admin/downloaded-access-code/send-sms?number="+e+"&code="+t)}}]),e}()).\u0275fac=function(e){return new(e||c)(a.Zb(o.b),a.Zb(p.a))},c.\u0275prov=a.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),m=n("5eHb"),h=n("ofXK"),v=n("FMnn");function C(e,t){1&e&&(a.Rb(0,"span"),a.zc(1,"Generar c\xf3digo"),a.Qb())}function g(e,t){1&e&&a.Nb(0,"i",26)}function R(e,t){1&e&&(a.Rb(0,"span"),a.zc(1,"Enviar SMS"),a.Qb())}function Q(e,t){1&e&&a.Nb(0,"i",26)}var y,z,k,S=[{path:"",redirectTo:"access-code"},{path:"access-code",component:b,children:[{path:"",component:(y=function(){function e(t,n,i){_classCallCheck(this,e),this.generateAccessCodeService=t,this.formBuilder=n,this.toastr=i}return _createClass(e,[{key:"ngOnInit",value:function(){this.accessCodeForm=this.formBuilder.group({accessCode:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")]),expirationInHours:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")]),tlfMovil:this.formBuilder.control("",[l.p.required,l.p.pattern("^[0-9]*$")])}),this.accessCodeFormInitialValues=this.accessCodeForm.value}},{key:"hasToDisableButtons",value:function(){return this._submittedAccessCode}},{key:"generateAccessCode",value:function(){var e=this;this._submittedAccessCode=!0,this.generateAccessCodeService.generateAccessCode().subscribe((function(t){e.updateFormWithAccessCode(t.accessCode),e._submittedAccessCode=!1}),(function(t){e.handleCommonErrors("Error","Error al intentar obtener el c\xf3digo. Si persiste el error contacte con el administrador.",t),e._submittedAccessCode=!1}))}},{key:"enviarSMS",value:function(){var e=this;this.generateAccessCodeService.sendMessage(this.accessCodeForm.get("tlfMovil").value,this.accessCode).subscribe((function(t){e.toastr.success("C\xf3digo enviado con \xe9xito.")}),(function(t){e.handleCommonErrors("Error","Error al intentar enviar el sms. Si persiste el error contacte con el administrador.",t),e._submittedAccessCode=!1}))}},{key:"resetForm",value:function(){this.accessCodeForm.reset(this.accessCodeFormInitialValues)}},{key:"handleCommonErrors",value:function(e,t,n){var i=t;403===n.status&&(i="Error de autenticaci\xf3n. Es posible que haya caducado la sesi\xf3n, intente conectarse de nuevo."),this.toastr.error(i,e)}},{key:"updateFormWithAccessCode",value:function(e){this.accessCode=e,this.accessCodeForm.patchValue({accessCode:e.match(/.{1,3}/g).join(" ")})}},{key:"submittedAccessCode",get:function(){return this._submittedAccessCode}},{key:"submittedSMS",get:function(){return this._submittedSMS}}]),e}(),y.\u0275fac=function(e){return new(e||y)(a.Mb(f),a.Mb(l.c),a.Mb(m.b))},y.\u0275cmp=a.Gb({type:y,selectors:[["app-generate-access-code"]],decls:91,vars:8,consts:[[1,"generate-access-code-container","component-container"],[1,"container-fluid"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"page-title"],[1,"row","align-items-center"],[1,"col-md-6","d-flex","justify-content-start"],[1,"emphasized","h-100"],[1,"col-md-6","d-flex","justify-content-end"],["type","reset",1,"btn","btn-standard","h-100",3,"click"],[1,"card","bg-white","shadow-sm","m-3"],[1,"card-body"],[1,"card-text"],[1,"card-header","bg-white"],[1,"emphasized"],[3,"formGroup"],[1,"card-header"],[1,"d-flex"],[1,"ml-1","w-100"],[1,"form-group","d-flex","justify-content-start"],["formControlName","accessCode","id","accessCode","readonly","","type","text",1,"form-control","w-25","text-center"],["type","button",1,"btn","btn-standard","w-25",3,"disabled","click"],[4,"ngIf"],["class","fa fa-lg fa-spinner fa-spin",4,"ngIf"],["name","listFilter","digitOnly","","formControlName","tlfMovil","id","tlfMovil","inputmode","numeric","pattern","[0-9]*","placeholder","N\xfamero de tel\xe9fono m\xf3vil","required","","type","tel",1,"form-control","w-25","text-center",3,"ngModel","ngModelChange"],[1,"fa","fa-lg","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"div",2),a.Nb(3,"div",3),a.Rb(4,"div",4),a.Rb(5,"section",5),a.Rb(6,"div",6),a.Rb(7,"div",7),a.Rb(8,"span",8),a.zc(9,"Generar c\xf3digo de acceso"),a.Qb(),a.Qb(),a.Rb(10,"div",9),a.Rb(11,"button",10),a.dc("click",(function(){return t.resetForm()})),a.zc(12,"Siguiente paciente"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Nb(13,"div",3),a.Qb(),a.Rb(14,"div",2),a.Nb(15,"div",3),a.Rb(16,"div",4),a.Rb(17,"section",11),a.Rb(18,"div",12),a.Rb(19,"div",13),a.Rb(20,"p"),a.zc(21,"Los c\xf3digos de acceso de Radar COVID s\xf3lo deben ser propoprcionados a pacientes con:"),a.Qb(),a.Rb(22,"ul"),a.Rb(23,"li"),a.zc(24,"resultados de test COVID-19 positivos confirmados"),a.Qb(),a.Rb(25,"li"),a.zc(26,"otros criterios adicionales, tales como diagn\xf3sticos confirmados"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(27,"section",11),a.Rb(28,"div",14),a.zc(29," Aseg\xfarese de que el paciente tiene instalada la aplicaci\xf3n de Radar COVID en su m\xf3vil "),a.Qb(),a.Rb(30,"div",12),a.Rb(31,"div",13),a.Rb(32,"p"),a.zc(33,"Instruya al paciente a:"),a.Qb(),a.Rb(34,"ol"),a.Rb(35,"li"),a.zc(36,"Visitar "),a.Rb(37,"span",15),a.zc(38,"http://radarcovidbalears.caib.es"),a.Qb(),a.Qb(),a.Rb(39,"li"),a.zc(40,"Pulsar sobre el icono de Apple App Store (iPhone) o Google Play (Android)"),a.Qb(),a.Rb(41,"li"),a.zc(42,"Instalar la aplicaci\xf3n."),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(43,"section",11),a.Rb(44,"form",16),a.Rb(45,"div",17),a.zc(46," Facilite al paciente el c\xf3digo de acceso de Radar COVID "),a.Qb(),a.Rb(47,"div",12),a.Rb(48,"div",13),a.Rb(49,"p"),a.zc(50,"Instruya al paciente a:"),a.Qb(),a.Rb(51,"ol"),a.Rb(52,"li"),a.zc(53,"Abrir la aplicaci\xf3n de Radar COVID pulsando sobre el icono."),a.Qb(),a.Rb(54,"li"),a.zc(55,"Pulsar sobre la pesta\xf1a "),a.Rb(56,"span",15),a.zc(57,"\xbfQu\xe9 hacer si el test da positivo?"),a.Qb(),a.Qb(),a.Rb(58,"li"),a.zc(59,"Pulsar en "),a.Rb(60,"span",15),a.zc(61,"Introducir el c\xf3digo Covid"),a.Qb(),a.zc(62,"."),a.Qb(),a.Rb(63,"li"),a.zc(64,"Leer la advertencia y pulsar sobre "),a.Rb(65,"span",15),a.zc(66,"Entendido"),a.Qb(),a.zc(67,"."),a.Qb(),a.Rb(68,"li",18),a.Rb(69,"div",19),a.Rb(70,"p"),a.zc(71,"Introducir el siguiente c\xf3digo de 12 d\xedgitos:"),a.Qb(),a.Rb(72,"div",20),a.Nb(73,"input",21),a.Rb(74,"button",22),a.dc("click",(function(){return t.generateAccessCode()})),a.xc(75,C,2,0,"span",23),a.xc(76,g,1,0,"i",24),a.Qb(),a.Qb(),a.Rb(77,"p"),a.zc(78,"De forma alternativa, p\xeddale el n\xfamero de tel\xe9fono m\xf3vil al paciente y env\xedele el c\xf3digo mediante SMS:"),a.Qb(),a.Rb(79,"div"),a.Rb(80,"div",20),a.Rb(81,"input",25),a.dc("ngModelChange",(function(e){return t.listFilter=e})),a.Qb(),a.Rb(82,"button",22),a.dc("click",(function(){return t.enviarSMS()})),a.xc(83,R,2,0,"span",23),a.xc(84,Q,1,0,"i",24),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(85,"li"),a.zc(86,"Pulsar sobre el bot\xf3n "),a.Rb(87,"span",15),a.zc(88,"Enviar"),a.Qb(),a.zc(89,"."),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Nb(90,"div",3),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(44),a.ic("formGroup",t.accessCodeForm),a.zb(30),a.ic("disabled",t.hasToDisableButtons()),a.zb(1),a.ic("ngIf",!t.submittedAccessCode),a.zb(1),a.ic("ngIf",t.submittedAccessCode),a.zb(5),a.ic("ngModel",t.listFilter),a.zb(1),a.ic("disabled",!t.listFilter),a.zb(1),a.ic("ngIf",!t.submittedSMS),a.zb(1),a.ic("ngIf",t.submittedSMS))},directives:[l.r,l.k,l.e,l.b,l.j,l.d,h.k,v.a,l.m,l.o],styles:[".generate-access-code-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-top:.5rem;padding:0 1rem}"]}),y)}]}],w=((z=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:z}),z.\u0275inj=a.Jb({factory:function(e){return new(e||z)},imports:[[r.c.forChild(S)],r.c]}),z),A=n("pKmL"),I=((k=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:k}),k.\u0275inj=a.Jb({factory:function(e){return new(e||k)},providers:[h.d],imports:[[w,A.a,o.c,l.g,l.n,s.a,v.b]]}),k)}}]);